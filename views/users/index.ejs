
           <%-include("../../views/parsuals/user/header")%>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="hero-content">
                        <h1>Premium Laptops for Every Need</h1>
                        <p>Discover the latest technology with our curated collection of high-performance laptops from
                            top brands worldwide.</p>
                        <a href="/shop" class="btn btn-hero">Shop Now</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Laptops Section -->
    <section id="shop" class="section-padding">
        <div class="container">
            <h2 class="section-title">Featured Laptops</h2>
            <div class="row">
                <!-- Product Grid -->
                <div class="col-12">
                    <div class="row">
                        <!-- Product Cards -->
                        <% for(let i=0; i < productData.length; i++) { %>
                            <div class="col-md-6 col-lg-4 col-xl-3">
                                <div class="product-card" onclick="handleProductClick('<%= productData[i]._id %>')">
                                    <div class="product-image">
                                        <img src="/Uploads/re-images/<%= productData[i].ProductImages[0] %>"
                                            class="img-fluid w-100 h-100 object-fit-cover rounded-top"
                                            style="max-height: 200px;">
                                        <div class="product-badge">Popular</div>
                                    </div>
                                    <div class="product-info">
                                        <a class="product-title" href="javascript:void(0)" onclick="handleProductClick('<%= productData[i]._id %>')">
                                            <%= productData[i].productName %>
                                        </a>
                                        <p class="product-description">
                                            <%= productData[i].productDescription %>
                                        </p>
                                        <p class=" mb-3">
                                            <%= productData[i].shortDescription%>
                                        </p>
                                        <span class="product-price">₹<%= productData[i].variants[0].regularPrice %></span>
                                        <span class="product-price text-muted text-decoration-line-through me-2 fs-6">₹<%= productData[i].variants[0].salePrice || productData[i].variants[0].regularPrice %></span>
                                        <button class="btn btn-product pt-3" onclick="handleAddToCart(event, '<%= productData[i]._id %>')">Add to Cart</button>
                                    </div>
                                </div>
                            </div>
                            <% } %>
                    </div>
                    <!-- Pagination -->
                    <nav aria-label="Product pagination">
                        <ul class="pagination">

                            <% if(currentPage > 1) { %>
                            <li class="page-item">
                                <a class="page-link" href="/?page=<%= currentPage - 1 %>" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <% } %>

                            <% for(let i=1; i <= totalPages; i++) { %>
                            <li class="page-item <%= currentPage === i ? 'active' : '' %>"><a class="page-link " href="/?page=<%= i %>"><%= i %></a></li>
                            <% } %>
                            <% if(currentPage < totalPages) { %>
                            <li class="page-item">
                                <a class="page-link  " href="/?page=<%= currentPage + 1 %>" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                            <% }  %>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </section>

    <!-- Why Choose Us Section -->
    <section class="why-choose-section section-padding">
        <div class="container">
            <h2 class="section-title">Why Choose Laptique?</h2>
            <div class="row">
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <h5 class="feature-title">Free Delivery</h5>
                        <p class="feature-description">Fast and free shipping on all orders over $500. Get your laptop
                            delivered within 2-3 business days.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h5 class="feature-title">Extended Warranty</h5>
                        <p class="feature-description">All our laptops come with extended warranty coverage and
                            comprehensive protection plans.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h5 class="feature-title">24/7 Support</h5>
                        <p class="feature-description">Our expert technical support team is available round the clock to
                            assist you with any queries.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-undo-alt"></i>
                        </div>
                        <h5 class="feature-title">Easy Returns</h5>
                        <p class="feature-description">Not satisfied? Return your laptop within 30 days for a full
                            refund, no questions asked.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <script>
        // Check if user is logged in
        const isUserLoggedIn = <%= user ? 'true' : 'false' %>;
        
        // Function to check authentication before any action
        function checkAuthentication() {
            if (!isUserLoggedIn) {
                window.location.href = '/login';
                return false;
            }
            return true;
        }
        
        // Handle product click
        function handleProductClick(productId) {
            if (checkAuthentication()) {
                window.location.href = `/product/${productId}`;
            }
        }
        
        // Handle add to cart
        function handleAddToCart(event, productId) {
            event.stopPropagation(); // Prevent triggering product click
            if (checkAuthentication()) {
                // Add your cart functionality here
                console.log('Adding product to cart:', productId);
                // You can implement actual cart functionality here
                alert('Product added to cart!');
            }
        }
        
        // Add click event listeners to all clickable elements for authentication check
        document.addEventListener('DOMContentLoaded', function() {
            // Add authentication check to navigation links (except login/register)
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                if (!link.href.includes('/login') && !link.href.includes('/register')) {
                    link.addEventListener('click', function(e) {
                        if (!isUserLoggedIn && !link.href.includes('#')) {
                            e.preventDefault();
                            window.location.href = '/login';
                        }
                    });
                }
            });
            
            // Add authentication check to shop now button
            const shopButton = document.querySelector('.btn-hero');
            if (shopButton) {
                shopButton.addEventListener('click', function(e) {
                    if (!isUserLoggedIn) {
                        e.preventDefault();
                        window.location.href = '/login';
                    }
                });
            }
            
            // Add authentication check to pagination links
            const paginationLinks = document.querySelectorAll('.page-link');
            paginationLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!isUserLoggedIn) {
                        e.preventDefault();
                        window.location.href = '/login';
                    }
                });
            });
            
            // Add authentication check to footer links
            const footerLinks = document.querySelectorAll('.footer a');
            footerLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!isUserLoggedIn && !link.href.includes('#')) {
                        e.preventDefault();
                        window.location.href = '/login';
                    }
                });
            });
        });
    </script>


    <%-include("../../views/parsuals/user/footer")%>